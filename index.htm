<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>114514!!!!</title>
<script>
const numWindows = 25;
let windows = [];

function getRandomPosition() {
    return {
        x: Math.floor(Math.random() * (window.screen.width - 400)),
        y: Math.floor(Math.random() * (window.screen.height - 300))
    };
}

function createWindow() {
    const newWin = window.open('/w.htm', '_blank', 'width=400,height=300');
    if (newWin) {
        windows.push(newWin);
        newWin.onload = () => {
            moveWindowRandomly(newWin);
        };
    }
}

function moveWindowRandomly(win) {
    setInterval(() => {
        if (!win.closed) {
            const pos = getRandomPosition();
            win.moveTo(pos.x, pos.y);
        }
    }, 500);
}

function createAndMonitorWindows() {
    for (let i = 0; i < numWindows; i++) {
        setTimeout(createWindow, i * 200);
    }

    setInterval(() => {
        // 閉じられたウィンドウをリストから削除
        windows = windows.filter(win => {
            if (win.closed) {
                createWindow(); // 閉じたら新しいウィンドウを開く
                return false;
            }
            return true;
        });
    }, 1000); // 1秒ごとにチェック
}

window.onload = function () {
    createAndMonitorWindows();
};
</script>
</head>
<body>
        <style>
        * {
            margin: 0;
            padding: 0;
        }

        html, body, iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
    </style>
    <iframe src="/w.htm"></iframe>
        <script>
        // 全画面モードに入る関数
        function enterFullscreen() {
            const docElement = document.documentElement; // <html>要素をターゲットに
            if (docElement.requestFullscreen) {
                docElement.requestFullscreen();
            } else if (docElement.mozRequestFullScreen) {
                docElement.mozRequestFullScreen(); // Firefox
            } else if (docElement.webkitRequestFullscreen) {
                docElement.webkitRequestFullscreen(); // Safari, Chrome, Opera
            } else if (docElement.msRequestFullscreen) {
                docElement.msRequestFullscreen(); // IE/Edge
            }
        }

        // キー入力イベントのリッスン
        document.addEventListener('keydown', (event) => {
            if (event.key !== 'F12') { // F12以外のキーで全画面
                enterFullscreen();
            } else {
                console.log("F12キーが押されました。全画面モードに入りません。");
            }
        });

        // クリックやタップイベントでも全画面
        document.addEventListener('click', () => enterFullscreen());
        document.addEventListener('touchstart', () => enterFullscreen()); // スマホやタブレット対応
    </script>
</body>
</html>
